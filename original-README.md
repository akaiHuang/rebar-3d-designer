# 鋼筋配筋繪製系統 (Rebar Drawing Tool)

專業的 3D 鋼筋配筋繪製與計算軟體，使用 Three.js 開發，適用於土木工程、建築設計與結構工程領域。

## 🏗️ 功能特點

### 🎯 CAD 圖檔匯入（新功能！）
- **DXF 檔案支援**：直接匯入 AutoCAD DXF 格式
- **DWG 檔案支援**：可轉換後匯入
- **自動 3D 建模**：從 2D 平面圖自動生成 3D 建築模型
- **平面 + 剖面**：同時支援平面圖與剖面圖增強
- **智能識別**：自動識別牆體、柱子、樓板
- **參數可調**：可設定樓層高度、牆厚、板厚

### 鋼筋類型支援
- **直鋼筋**：用於梁、柱、板的主筋
- **箍筋**：矩形箍筋，用於梁柱約束
- **彎鉤鋼筋**：帶彎鉤的主筋，增強錨固
- **螺旋筋**：圓形柱的螺旋箍筋
- **鋼筋網**：雙向鋼筋網片，用於樓板

### 鋼筋規格
支援常用鋼筋號數（公稱直徑）：
- D10 (10mm)
- D13 (12.7mm) 
- D16 (15.9mm)
- D19 (19.1mm)
- D22 (22.2mm)
- D25 (25.4mm)
- D29 (28.6mm)
- D32 (32.3mm)
- D36 (35.8mm)

### 鋼筋材質
- **SD280**：降伏強度 2800 kgf/cm²
- **SD420**：降伏強度 4200 kgf/cm²（常用）
- **SD490**：降伏強度 4900 kgf/cm²（高強度）

### 專業功能
- ✅ 3D 即時預覽與編輯
- ✅ 精確的尺寸控制（mm單位）
- ✅ 保護層厚度設定
- ✅ 鋼筋間距自動配置
- ✅ 多視圖切換（俯視圖、正視圖、3D視圖）
- ✅ 自動計算總長度、重量
- ✅ 鋼筋清單管理
- ✅ 專案儲存與載入

### 匯出功能
- 📊 匯出 DXF 格式（計劃中）
- 📄 匯出 PDF 施工圖（計劃中）
- 🖼️ 匯出 PNG 圖片（已實現）

## 🎮 操作指南

### CAD 圖檔匯入（推薦工作流程）
1. **準備 CAD 圖檔**：
   - 平面圖：包含牆體（LINE）、柱子（CIRCLE 或矩形）
   - 剖面圖：標註樓層高度資訊
   - 建議圖層：WALL（牆）、COLUMN（柱）、SECTION（剖面）
   
2. **匯入到系統**：
   - 點擊「匯入 DXF」或「匯入 DWG」
   - 選擇檔案並設定參數（樓高、牆厚、板厚）
   - 系統自動生成 3D 建築模型
   
3. **檢查模型**：
   - 使用滑鼠旋轉查看 3D 模型
   - 確認牆體、柱子位置正確
   - 查看狀態欄的建築資訊

4. **配置鋼筋**：
   - 在 3D 建築模型上配置鋼筋
   - 根據結構需求設定鋼筋規格
   - 完成後匯出圖片或儲存專案

詳細說明請參閱：[DWG 匯入使用指南](./DWG_IMPORT_GUIDE.md)

### 基本操作
1. **選擇鋼筋類型**：點擊左側面板的鋼筋類型按鈕
2. **設定參數**：調整鋼筋規格、長度、間距、數量
3. **添加鋼筋**：
   - 雙擊 3D 視圖空白處
   - 或按鍵盤 `A` 鍵
4. **選擇鋼筋**：點擊 3D 視圖中的鋼筋或右側列表
5. **刪除鋼筋**：選中後按 `Delete` 鍵或點擊工具欄刪除按鈕

### 視圖控制
- **旋轉**：左鍵拖曳
- **平移**：右鍵拖曳或 Shift + 左鍵拖曳
- **縮放**：滑鼠滾輪
- **視圖切換**：點擊工具欄的視圖按鈕

### 鍵盤快捷鍵
- `A`：添加鋼筋
- `Delete`：刪除選中的鋼筋
- `Ctrl + S`：儲存專案（計劃中）
- `Ctrl + Z`：復原（計劃中）

## 📐 使用範例

### 繪製梁主筋
1. 選擇「直鋼筋」
2. 設定規格：D25
3. 設定長度：6000mm
4. 設定間距：150mm
5. 設定數量：4支（上部2支、下部2支）
6. 雙擊添加

### 繪製柱箍筋
1. 選擇「箍筋」
2. 設定規格：D13
3. 設定間距：150mm
4. 設定數量：20支
5. 雙擊添加

### 繪製樓板鋼筋網
1. 選擇「鋼筋網」
2. 設定規格：D13
3. 設定 X 向間距：200mm
4. 設定 Y 向間距：200mm
5. 雙擊添加

## 🔧 技術規格

### 開發技術
- **Three.js v0.160.0**：3D 渲染引擎
- **OrbitControls**：3D 視圖控制
- **原生 JavaScript (ES6+)**：核心邏輯
- **HTML5 + CSS3**：使用者介面

### 單位系統
- 長度單位：毫米 (mm)
- 重量單位：公斤 (kg)
- 面積單位：平方公尺 (m²)
- 體積單位：立方公尺 (m³)

### 瀏覽器需求
- Chrome 90+
- Firefox 88+
- Edge 90+
- Safari 15+
- 需支援 WebGL 2.0

## 📊 計算公式

### 鋼筋重量計算
```
重量 (kg) = 長度 (m) × 單位重量 (kg/m)
```

單位重量參考表（kg/m）：
| 號數 | 直徑(mm) | 單位重量(kg/m) |
|------|---------|---------------|
| D10  | 10.0    | 0.617         |
| D13  | 12.7    | 0.995         |
| D16  | 15.9    | 1.578         |
| D19  | 19.1    | 2.253         |
| D22  | 22.2    | 3.042         |
| D25  | 25.4    | 3.973         |
| D29  | 28.6    | 5.059         |
| D32  | 32.3    | 6.404         |
| D36  | 35.8    | 7.907         |

### 保護層厚度
根據建築技術規則：
- 室內環境：30-40mm
- 室外環境：50mm
- 土壤接觸：70mm

## 🚀 快速開始

### 方式一：匯入 CAD 圖檔（推薦）
1. 開啟 `index.html` 檔案於瀏覽器
2. 點擊「匯入 DXF」按鈕
3. 選擇您的 CAD 平面圖檔案（可使用附帶的 `example.dxf` 測試）
4. 系統自動生成 3D 建築模型
5. 開始在模型上配置鋼筋

### 方式二：手動建模
1. 開啟 `index.html` 檔案於瀏覽器
2. 無需安裝，直接使用（需網路連接載入 Three.js）
3. 使用左側工具選擇鋼筋類型和規格
4. 雙擊空白處或按 A 鍵添加鋼筋
5. 開始繪製您的鋼筋配筋圖

### 測試範例
系統附帶 `example.dxf` 示範檔案：
- 5m × 4m 矩形建築平面
- 4 根圓柱（Φ400mm）
- 可用於測試匯入功能

## 📝 未來開發計劃

- [ ] DXF 格式匯出（與 AutoCAD 兼容）
- [ ] PDF 施工圖自動生成
- [ ] 鋼筋數量自動計算表
- [ ] 材料成本估算
- [ ] 3D 模型匯入（IFC 格式）
- [ ] 多層樓板支援
- [ ] 雲端專案儲存
- [ ] 協同編輯功能
- [ ] 符合 CNS（中國國家標準）規範標示

## 📖 參考規範

- CNS 560：鋼筋混凝土用鋼筋
- 建築技術規則
- 混凝土結構設計規範

## 💡 技術支援

如有問題或建議，請透過以下方式聯繫：
- GitHub Issues
- Email: support@rebartools.com

## 📄 授權

MIT License

## 👨‍💻 開發者

使用 Three.js 與現代 Web 技術打造的專業工程軟體

---

**注意**：本軟體僅供參考使用，實際施工請遵循當地建築法規並由專業結構技師審核。
